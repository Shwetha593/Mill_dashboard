<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Product Inventory</title>
  <style>
    .inventory-container {
      padding: 20px;
      font-family: sans-serif;
    }

    .inventory-actions {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    #add-product-btn {
      background-color: #28a745;
      color: white;
      padding: 12px 20px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 16px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);
      transition: background-color 0.3s ease;
    }

    #add-product-btn:hover {
      background-color: #218838;
    }

    .search-bar {
      display: flex;
      gap: 10px;
    }

    .search-bar input[type="text"] {
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 4px;
      flex-grow: 1;
    }

    .search-bar button {
      background-color: #007bff;
      color: white;
      padding: 10px 15px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 16px;
      transition: background-color 0.3s ease;
    }

    .search-bar button:hover {
      background-color: #0056b3;
    }

    #product-list {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 15px;
      margin-top: 20px;
    }

    .product-item {
      border: 1px solid #ddd;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.05);
      background-color: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
    }

    .product-item img {
      width: 80px;
      height: 80px;
      object-fit: contain;
      margin-bottom: 8px;
    }

    .product-item h3 {
      margin-top: 0;
      color: #333;
      margin-bottom: 5px;
      font-size: 1.2em;
    }

    .product-item p {
      margin-bottom: 4px;
      color: #555;
      font-size: 0.9em;
    }

    .product-item button {
      padding: 8px 12px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      margin-top: 8px;
      transition: opacity 0.2s ease;
    }

    .product-item button:hover {
      opacity: 0.9;
    }

    .product-item .edit-btn {
      background-color: #007bff;
      color: white;
    }

    .product-item .delete-btn {
      background-color: #dc3545;
      color: white;
    }

    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0,0,0,0.4);
    }

    .modal-content {
      background-color: #fff;
      margin: 10% auto;
      padding: 20px;
      border: 1px solid #888;
      width: 50%;
      border-radius: 8px;
      position: relative;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .close-button {
      color: #aaa;
      float: right;
      font-size: 28px;
      font-weight: bold;
    }

    .close-button:hover,
    .close-button:focus {
      color: black;
      text-decoration: none;
      cursor: pointer;
    }

    #product-form label {
      display: block;
      margin-bottom: 8px;
      font-weight: bold;
      color: #333;
      font-size: 16px;
    }

    #product-form input[type="text"],
    #product-form input[type="number"],
    #product-form input[type="date"],
    #product-form select {
      width: calc(100% - 16px);
      padding: 10px;
      margin-bottom: 15px;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-sizing: border-box;
      font-size: 16px;
    }

    #product-form button[type="submit"] {
      background-color: #007bff;
      color: white;
      padding: 12px 18px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 16px;
      transition: background-color 0.3s ease;
    }

    #product-form button[type="submit"]:hover {
      background-color: #0056b3;
    }

    .error-message {
      color: red;
      font-size: 0.9em;
      margin-top: 5px;
    }
  </style>
</head>
<body>
  <div class="inventory-container">
    <h1>Product Inventory</h1>

    <div class="inventory-actions">
      <button id="add-product-btn">Add New Product</button>
      <div class="search-bar">
        <input type="text" id="search-input" placeholder="Search Products...">
        <button id="search-btn">Search</button>
      </div>
    </div>

    <div id="product-list">
    </div>

    <div id="product-modal" class="modal">
      <div class="modal-content">
        <span class="close-button">&times;</span>
        <h2>Add/Edit Product</h2>
        <form id="product-form">
          <input type="hidden" id="product-id">
          <label for="product-name">Product Name:</label>
          <input type="text" id="product-name" required pattern="^[A-Za-z\s]+$" title="Product name should only contain alphabets and spaces"><br>
          <div id="product-name-error" class="error-message"></div>

          <label for="product-category">Category:</label>
          <select id="product-category">
            <option value="raw-milk">Raw Milk</option>
            <option value="processed-milk">Processed Milk</option>
            <option value="dairy-products">Dairy Products (e.g., Cheese, Yogurt)</option>
          </select><br>

          <label for="quantity">Quantity (in Liters/Units):</label>
          <input type="number" id="quantity" min="0" required><br>

          <label for="unit-price">Unit Price (₹):</label>
          <input type="number" id="unit-price" min="0" step="0.01" required><br>

          <label for="production-date">Production Date:</label>
          <input type="date" id="production-date"><br>

          <label for="expiry-date">Expiry Date:</label>
          <input type="date" id="expiry-date"><br>

          <button type="submit">Save Product</button>
        </form>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const addProductBtn = document.getElementById('add-product-btn');
      const productModal = document.getElementById('product-modal');
      const closeButton = productModal.querySelector('.close-button');
      const productForm = document.getElementById('product-form');
      const productNameInput = document.getElementById('product-name');
      const quantityInput = document.getElementById('quantity');
      const unitPriceInput = document.getElementById('unit-price');
      const productList = document.getElementById('product-list');
      const searchInput = document.getElementById('search-input');
      const searchBtn = document.getElementById('search-btn');
      const productNameError = document.getElementById('product-name-error');

      // **Replace these with actual image URLs or paths**
    const productImageMap = {
  'Fresh Cow Milk': 'images/dodla-full-cream-milk.png',
  'Pasteurized Milk': 'images/Standardised-Milk.png',
  'Cheddar Cheese': 'images/Cheddar-Cheese.jpeg',
  'Curd': 'images/curd.png',
  'Butter': 'images/butter.jpg',
  'Yogurt': 'images/Standardised-Milk.png',
  'Raw Milk': 'images/raw-milk.png',
  'Processed Milk': 'images/processed-milk.png',
  'Dairy Products (e.g., Cheese, Yogurt)': 'images/dairy-products.png'
};


      let products = [
        { id: 1, name: 'Fresh Cow Milk', category: 'raw-milk', quantity: 500, unitPrice: 45.00, productionDate: '2025-05-10', expiryDate: '2025-05-15' },
        { id: 2, name: 'Pasteurized Milk', category: 'processed-milk', quantity: 200, unitPrice: 60.00, productionDate: '2025-05-13', expiryDate: '2025-05-18' },
    
        { id: 4, name: 'Curd', category: 'dairy-products', quantity: 100, unitPrice: 30.00, productionDate: '2025-05-12', expiryDate: '2025-05-17' },
        { id: 5, name: 'Butter', category: 'dairy-products', quantity: 75, unitPrice: 80.00, productionDate: '2025-05-11', expiryDate: '2025-06-11' },
      ];
      let editingProductId = null;

      function getProductImage(productName) {
        return productImageMap[productName] || 'default-product.png'; // Use a default if no match
      }

      function renderProductList(currentProducts) {
        productList.innerHTML = '';
        if (currentProducts.length === 0) {
          productList.innerHTML = '<p>No products found.</p>';
          return;
        }
        currentProducts.forEach(product => {
          const productDiv = document.createElement('div');
          productDiv.classList.add('product-item');
          const imageName = getProductImage(product.name);
          productDiv.innerHTML = `
            <img src="${imageName}" alt="${product.name}">
            <h3>${product.name}</h3>
            <p>Category: ${product.category}</p>
            <p>Quantity: ${product.quantity} ${product.category === 'raw-milk' || product.category === 'processed-milk' ? 'L' : 'Units'}</p>
            <p>Price: ₹${product.unitPrice.toFixed(2)}</p>
            ${product.productionDate ? `<p>Production: ${product.productionDate}</p>` : ''}
            ${product.expiryDate ? `<p>Expiry: ${product.expiryDate}</p>` : ''}
            <button class="edit-btn" data-id="${product.id}">Edit</button>
            <button class="delete-btn" data-id="${product.id}">Delete</button>
          `;
          productList.appendChild(productDiv);
        });

        const editButtons = document.querySelectorAll('.edit-btn');
        editButtons.forEach(button => {
          button.addEventListener('click', editProduct);
        });

        const deleteButtons = document.querySelectorAll('.delete-btn');
        deleteButtons.forEach(button => {
          button.addEventListener('click', confirmDeleteProduct);
        });
      }

      addProductBtn.addEventListener('click', () => {
        editingProductId = null;
        productForm.reset();
        productModal.style.display = 'block';
        productNameError.textContent = '';
      });

      closeButton.addEventListener('click', () => {
        productModal.style.display = 'none';
        productNameError.textContent = '';
      });

      window.addEventListener('click', (event) => {
        if (event.target === productModal) {
          productModal.style.display = 'none';
          productNameError.textContent = '';
        }
      });

      productForm.addEventListener('submit', (event) => {
        event.preventDefault();

        const name = productNameInput.value.trim();
        const category = document.getElementById('product-category').value;
        const quantity = parseInt(quantityInput.value);
        const unitPrice = parseFloat(unitPriceInput.value);
        const productionDate = document.getElementById('production-date').value;
        const expiryDate = document.getElementById('expiry-date').value;

        const nameRegex = /^[A-Za-z\s]+$/;
        if (!nameRegex.test(name)) {
          productNameError.textContent = 'Product name should only contain alphabets and spaces.';
          return;
        } else {
          productNameError.textContent = '';
        }

        if (isNaN(quantity) || quantity < 0) {
          alert('Please enter a valid quantity.');
          return;
        }

        if (isNaN(unitPrice) || unitPrice < 0) {
          alert('Please enter a valid unit price.');
          return;
        }

        if (editingProductId) {
          const index = products.findIndex(product => product.id === editingProductId);
          if (index !== -1) {
            products[index] = { id: editingProductId, name, category, quantity, unitPrice, productionDate, expiryDate };
          }
        } else {
          const newId = products.length > 0 ? Math.max(...products.map(p => p.id)) + 1 : 1;
          products.push({ id: newId, name, category, quantity, unitPrice, productionDate, expiryDate });
        }

        renderProductList(products);
        productModal.style.display = 'none';
        editingProductId = null;
        productForm.reset();
      });

      function editProduct(event) {
        const productId = parseInt(event.target.dataset.id);
        editingProductId = productId;
        const productToEdit = products.find(product => product.id === productId);

        if (productToEdit) {
          document.getElementById('product-id').value = productToEdit.id;
          document.getElementById('product-name').value = productToEdit.name;
          document.getElementById('product-category').value = productToEdit.category;
          document.getElementById('quantity').value = productToEdit.quantity;
          document.getElementById('unit-price').value = productToEdit.unitPrice;
          document.getElementById('production-date').value = productToEdit.productionDate || '';
          document.getElementById('expiry-date').value = productToEdit.expiryDate || '';
          productModal.style.display = 'block';
          productNameError.textContent = '';
        }
      }

      function confirmDeleteProduct(event) {
        if (confirm('Are you sure you want to delete this product?')) {
          deleteProduct(parseInt(event.target.dataset.id));
        }
      }

      function deleteProduct(productIdToDelete) {
        products = products.filter(product => product.id !== productIdToDelete);
        renderProductList(products);
      }

      searchBtn.addEventListener('click', () => {

const searchTerm = searchInput.value.toLowerCase();
        const filteredProducts = products.filter(product =>
          product.name.toLowerCase().includes(searchTerm) ||
          product.category.toLowerCase().includes(searchTerm)
        );
        renderProductList(filteredProducts);
      });

      searchInput.addEventListener('input', () => {
        if (searchInput.value.trim() === '') {
          renderProductList(products);
        }
      });

      // **Initial product list rendering**
      renderProductList(products);
    });
  </script>
</body>
</html>