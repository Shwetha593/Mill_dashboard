<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Customer Management</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f5f7fa;
      margin: 0;
      padding: 30px;
    }

    .header {
      background-color: #2c3e50;
      color: white;
      padding: 16px;
      font-size: 22px;
      text-align: center;
      font-weight: bold;
    }

    .container {
      margin-top: 30px;
    }

    .title-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .title-row h2 {
      margin: 0;
      color: #2c3e50;
    }

    .btn {
      background-color: #3498db;
      color: white;
      padding: 10px 18px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
      transition: background-color 0.3s;
    }

    .btn:hover {
      background-color: #2980b9;
    }

  

table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 20px;
  background: white;
  box-shadow: 0 2px 8px rgba(0,0,0,0.05);
  border-radius: 8px;
  overflow: hidden;
}

th, td {
  border: 1px solid #eaeaea;
  padding: 10px 8px;
  text-align: center;
  white-space: nowrap;         /* Prevent line breaks */
  height: 50px;                /* Set uniform row height */
  vertical-align: middle;      /* Align content vertically */
}

td:last-child {
  display: flex;
  justify-content: center;
  align-items: center;         /* Vertically center icons */
  gap: 10px;
}

.action-icon {
  width: 20px;
  height: 20px;
  cursor: pointer;
  transition: transform 0.2s;
  padding: 2px;
}










    .action-icon:hover {
      transform: scale(1.2);
    }

    .action-icon[title] {
      position: relative;
    }

    .modal {
      display: none;
      position: fixed;
      z-index: 10;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.5);
    }

    .modal-content {
      background-color: #fff;
      margin: 5% auto;
      padding: 30px;
      width: 400px;
      border-radius: 8px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }

    .modal-content input {
      width: 100%;
      padding: 10px;
      margin: 8px 0;
      border-radius: 4px;
      border: 1px solid #ccc;
    }

    .close {
      float: right;
      font-size: 20px;
      cursor: pointer;
      color: red;
    }

    .modal h3 {
      margin-top: 0;
      color: #2c3e50;
    }

    .btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }
  </style>
</head>
<body>

<div class="header">Customer Relationship Management</div>

<div class="container">
  <div class="title-row">
    <h2>Customer Management</h2>
    <button class="btn" onclick="openModal('add')">Add New Customer</button>
  </div>

  <table id="customerTable">
    <thead>
      <tr>
        <th>ID</th><th>Name</th><th>Location</th><th>Contact</th><th>Cattle Count</th><th>Avg. Daily Supply</th><th>Quality Rating</th><th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>1001</td><td>Rajesh Kumar</td><td>Coimbatore, TN</td><td>9876543210</td><td>24</td><td>85 L/day</td><td>4.5/5</td>
        <td>
          <img src="https://cdn-icons-png.flaticon.com/512/159/159604.png" alt="View" title="View" class="action-icon" onclick="viewCustomer(this)">
          <img src="https://cdn-icons-png.flaticon.com/512/1159/1159633.png" alt="Edit" title="Edit" class="action-icon" onclick="editCustomer(this)">
          <img src="https://cdn-icons-png.flaticon.com/512/1828/1828666.png" alt="Delete" title="Delete" class="action-icon" onclick="deleteCustomer(this)">
        </td>
      </tr>


<tr>
        <td>1002</td><td>praveen Kumar</td><td>Mandya, KA</td><td>8234567890</td><td>18</td><td>35 L/day</td><td>3.5/5</td>
        <td>
          <img src="https://cdn-icons-png.flaticon.com/512/159/159604.png" alt="View" title="View" class="action-icon" onclick="viewCustomer(this)">
          <img src="https://cdn-icons-png.flaticon.com/512/1159/1159633.png" alt="Edit" title="Edit" class="action-icon" onclick="editCustomer(this)">
          <img src="https://cdn-icons-png.flaticon.com/512/1828/1828666.png" alt="Delete" title="Delete" class="action-icon" onclick="deleteCustomer(this)">
        </td>
      </tr>


<tr>
        <td>1003</td><td>Varsha</td><td>Mysuru, KA</td><td>9686543210</td><td>10</td><td>10 L/day</td><td>3.6/5</td>
        <td>
          <img src="https://cdn-icons-png.flaticon.com/512/159/159604.png" alt="View" title="View" class="action-icon" onclick="viewCustomer(this)">
          <img src="https://cdn-icons-png.flaticon.com/512/1159/1159633.png" alt="Edit" title="Edit" class="action-icon" onclick="editCustomer(this)">
          <img src="https://cdn-icons-png.flaticon.com/512/1828/1828666.png" alt="Delete" title="Delete" class="action-icon" onclick="deleteCustomer(this)">
        </td>
      </tr>




    </tbody>
  </table>
</div>

<!-- Modal for Add/Edit -->
<div id="customerModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal()">&times;</span>
    <h3 id="modalTitle">Add Customer</h3>
    <input id="id" placeholder="ID (numbers only)" type="number" />
    <input id="name" placeholder="Name (letters only)" />
    <input id="location" placeholder="Location" />
    <input id="contact" placeholder="Contact (10 digits)" maxlength="10" />
    <input id="cattle" placeholder="Cattle Count" type="number" />
    <input id="supply" placeholder="Avg. Daily Supply (e.g. 70 L/day)" />
    <input id="rating" placeholder="Quality Rating (0-5)" type="number" step="0.1" min="0" max="5"/>
    <button class="btn" onclick="saveCustomer()">Save</button>
  </div>
</div>

<!-- Modal for View -->
<div id="viewModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal()">&times;</span>
    <h3>Customer Details</h3>
    <p id="viewContent"></p>
  </div>
</div>

<script>
  let editingRow = null;

  function openModal(type, row = null) {
    document.getElementById('customerModal').style.display = 'block';
    document.getElementById('modalTitle').innerText = type === 'edit' ? 'Edit Customer' : 'Add Customer';

    if (type === 'edit') {
      editingRow = row;
      let cells = row.children;
      document.getElementById('id').value = cells[0].innerText;
      document.getElementById('name').value = cells[1].innerText;
      document.getElementById('location').value = cells[2].innerText;
      document.getElementById('contact').value = cells[3].innerText;
      document.getElementById('cattle').value = cells[4].innerText;
      document.getElementById('supply').value = cells[5].innerText;
      document.getElementById('rating').value = parseFloat(cells[6].innerText);
    } else {
      editingRow = null;
      document.querySelectorAll('#customerModal input').forEach(input => input.value = '');
    }
  }

  function closeModal() {
    document.getElementById('customerModal').style.display = 'none';
    document.getElementById('viewModal').style.display = 'none';
  }

  function validateInputs(id, name, contact, rating) {
    const nameRegex = /^[a-zA-Z\s]+$/;
    if (!/^\d+$/.test(id)) return alert("ID must be numeric.");
    if (!nameRegex.test(name)) return alert("Name must contain only letters.");
    if (!/^\d{10}$/.test(contact)) return alert("Contact must be 10 digits.");
    if (isNaN(rating) || rating < 0 || rating > 5) return alert("Rating must be a number between 0 and 5.");
    return true;
  }

  function saveCustomer() {
    const id = document.getElementById('id').value.trim();
    const name = document.getElementById('name').value.trim();
    const location = document.getElementById('location').value.trim();
    const contact = document.getElementById('contact').value.trim();
    const cattle = document.getElementById('cattle').value.trim();
    const supply = document.getElementById('supply').value.trim() || '0 L/day';
    const rating = document.getElementById('rating').value.trim() || '0';

    if (!validateInputs(id, name, contact, rating)) return;

    const formattedRating = `${parseFloat(rating).toFixed(1)}/5`;

    if (editingRow) {
      const cells = editingRow.children;
      cells[0].innerText = id;
      cells[1].innerText = name;
      cells[2].innerText = location;
      cells[3].innerText = contact;
      cells[4].innerText = cattle;
      cells[5].innerText = supply;
      cells[6].innerText = formattedRating;
    } else {
      const table = document.getElementById('customerTable').getElementsByTagName('tbody')[0];
      const newRow = table.insertRow();
      newRow.innerHTML = `
        <td>${id}</td><td>${name}</td><td>${location}</td><td>${contact}</td><td>${cattle}</td>
        <td>${supply}</td><td>${formattedRating}</td>
        <td>
          <img src="https://cdn-icons-png.flaticon.com/512/159/159604.png" alt="View" title="View" class="action-icon" onclick="viewCustomer(this)">
          <img src="https://cdn-icons-png.flaticon.com/512/1159/1159633.png" alt="Edit" title="Edit" class="action-icon" onclick="editCustomer(this)">
          <img src="https://cdn-icons-png.flaticon.com/512/1828/1828666.png" alt="Delete" title="Delete" class="action-icon" onclick="deleteCustomer(this)">
        </td>`;
    }

    closeModal();
  }

  function viewCustomer(btn) {
    const row = btn.parentElement.parentElement;
    const data = Array.from(row.children).slice(0, 7).map(td => td.innerText).join('<br>');
    document.getElementById('viewContent').innerHTML = data;
    document.getElementById('viewModal').style.display = 'block';
  }

  function editCustomer(btn) {
    const row = btn.parentElement.parentElement;
    openModal('edit', row);
  }

  function deleteCustomer(btn) {
    if (confirm("Are you sure you want to delete this customer?")) {
      const row = btn.parentElement.parentElement;
      row.remove();
    }
  }
</script>

</body>
</html>